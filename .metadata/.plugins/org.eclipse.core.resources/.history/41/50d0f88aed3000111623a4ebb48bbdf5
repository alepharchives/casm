/*
 * matdsl.c
 *
 *  Created on: Dec 28, 2011
 *      Author: shlomi
 */

#include "matdsl.h"

PF(add_mat)    THREE_MATRIX(add)
PF(sub_mat)    THREE_MATRIX(sub)
PF(mul_mat)    THREE_MATRIX(mul)
PF(trans_mat)  TWO_MATRIX(transMat)
PF(print_mat)  FMAT(first, VERIFY;printMat(Mats[first]))
PF(mul_scalar) FMAT(first, SCALAR(second, MAT(third, VERIFY;mulScalar(Mats[first], second, &Mats[third]))))

PF(read_mat)   FMAT(first,
				OSCALAR(second, OSCALAR(third, OSCALAR(forth, OSCALAR(fith,
				OSCALAR(sixth, OSCALAR(seventh, OSCALAR(eighth, OSCALAR(ninth,
				OSCALAR(tenth, OSCALAR(eleventh, OSCALAR(twelvth, OSCALAR(thirtenth,
				OSCALAR(fortenth, OSCALAR(fiftenth, OSCALAR(sixtenth, OSCALAR(sevententh,
						initMat(&Mats[first],
								second,  third, forth, fith,
								sixth,  seventh, eighth, ninth,
								tenth,  eleventh, twelvth, thirtenth,
								fortenth,  fiftenth, sixtenth, sevententh);)))))))))))))))))

char* getMatrixIndex(char* p, int* matIndex, char* errStr, int* err) {
	TO_PROCESS;

	p = matchWord(strip(p, ", "), "MAT_");
	if (p == NULL) {
		printf("Wrong parameters, %s parameter must be a valid matrix identifier\n", errStr);
		*err = MAT_IDENT_ERR;
		return NULL;
	}
	*matIndex = *(p++)-'A';
	if (*matIndex<0||*matIndex>MAX_MATS-1) {
		printf("Wrong parameters, matrix identifier has to be between MAT_A and MAT_F\n");
		*err = MAT_IDENT_ERR;
		return NULL;
	}

	return p;
}
