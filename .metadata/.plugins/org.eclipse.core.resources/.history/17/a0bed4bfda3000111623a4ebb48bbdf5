/*
 * main.c
 *
 *  Created on: Dec 26, 2011
 *      Author: shlomi
 */

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include "mat.h"
#include "parser.h"
#include "matdsl.h"

Mat Mats[6];

PF(add_mat)    THREE_MATRIX(add)
PF(sub_mat)    THREE_MATRIX(sub)
PF(mul_mat)    THREE_MATRIX(mul)
PF(trans_mat)  TWO_MATRIX(transMat)
PF(print_mat)  FMAT(first, VERIFY;printMat(Mats[first]))
PF(mul_scalar) FMAT(first, SCALAR(second, MAT(third, VERIFY;mulScalar(Mats[first], second, &Mats[third]))))

int main(void) {

	char line[1000];
	char *l;
	int err = 0;

	while (1) {
		getline(line, sizeof(line));
		l = strip(line, " ");

		DO(read_mat) OR(add_mat) OR(print_mat) OR(sub_mat) OR(mul_mat) OR(trans_mat) OR(mul_scalar)
		QUIT(stop) ELSE("no such command")
	}

	return 0;
}
